<h2>Post</h2>

<div class="card mb-3">
  <div class="card-body">
    <strong><%= @post.user.email %></strong>
    <p><%= @post.content %></p>

    <% if current_user == @post.user || current_user.admin? %>
  <%= button_to "Delete Post",
      post_path(@post),
      method: :delete,
      data: { confirm: "Are you sure you want to delete this post?" },
      class: "btn btn-danger" %>
<% end %>
  </div>
</div>

<hr>

<h3>Comments</h3>


<% @post.comments.each do |comment| %>
  <p>
    <strong><%= comment.user.full_name %>:</strong>
    <%= comment.content %>

    <% if current_user == comment.user || current_user == @post.user %>
      <%= link_to "Edit",
          edit_post_comment_path(@post, comment),
          class: "btn btn-outline-warning btn-sm" %>

      <%= button_to "Delete",
          post_comment_path(@post, comment),
          method: :delete,
          data: { confirm: "Delete comment?" },
          class: "btn btn-outline-danger btn-sm" %>
    <% end %>
  </p>
<% end %>

<hr>

<h4>Add Comment</h4>
<%= render "comments/form" %>

<%= link_to "Back to Posts", posts_path %>
